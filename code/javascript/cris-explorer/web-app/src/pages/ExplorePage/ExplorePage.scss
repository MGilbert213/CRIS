.explore {
    &--container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
    }
}
.display-hidden {
    display: none;
}

.main {
    display: flex;
    gap: 2rem;
    width: 100%;
    height: 100%;
    justify-content: space-between;
    flex-direction: column;

    //#region form
    &__form {
        position: relative;
        margin-inline-start: auto;
        z-index: 999;
    }

    &__form-fields {
        display: flex;
        width: 87%;
        margin-inline-start: auto;
        gap: 1rem;
    }
    //#endregion form

    //#region tabs
    &__tab-wrap {
        position: relative;
        height: 48px;
        margin-block-start: calc(-48px);
        display: flex;
        gap: 0.4rem;
        border-block-end: 10px solid var(--brand);

        &::before {
            content: '';
            position: absolute;
            width: 10px;
            height: 48px;
            margin-inline-start: -10px;
            background: linear-gradient(to bottom, var(--background) calc(100% - 10px), var(--brand) calc(100% - 10px));
            z-index: 111;
        }

        &::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 48px;
            margin-inline-end: -10px;
            inset-inline-end: 0;
            background: linear-gradient(to bottom, var(--background) calc(100% - 10px), var(--brand) calc(100% - 10px));
            z-index: 111;
        }

        & > * {
            margin-block-start: -1px;
        }
    }

    &__tab {
        display: flex;
        gap: 1rem;
        align-items: center;
        padding: 0 1rem;
        border: none;
        background: #fff;
        border: 1px solid var(--brand);

        &:first-of-type {
            margin-inline-start: 0.25rem;
        }

        // @media (prefers-color-scheme: dark) {
        //     background: transparent;
        // }

        &.active {
            background-color: var(--brand) !important;
            color: var(--background);

            // @media (prefers-color-scheme: dark) {
            //     color: var(--foreground);
            // }
        }

        &--1,
        &--2 {
            transform: scaleY(1);
            transform-origin: bottom;
            transition: transform 0.05s ease-out;

            @starting-style {
                transform: scaleY(0);
            }
        }

        &--close-btn {
            width: 14px;
            rotate: 45deg;
            stroke: var(--brand);
            // @media (prefers-color-scheme: dark) {
            //     stroke: var(--foreground);
            // }
        }

        &.active &--close-btn {
            stroke: var(--background);
            // @media (prefers-color-scheme: dark) {
            //     stroke: var(--foreground);
            // }
        }

        &--add {
            padding: 0.75rem 0.658rem !important;
        }

        &--compare {
            padding: 0 0.658rem !important;
        }

        &--compare svg {
            margin-block-start: -2px;
            fill: var(--brand);
            width: 22px;

            // @media (prefers-color-scheme: dark) {
            //     fill: var(--foreground);
            // }
        }

        &.active svg {
            fill: var(--background);
            // @media (prefers-color-scheme: dark) {
            //     fill: var(--foreground);
            // }
        }
    }
    //#endregion tabs

    //#region views
    &__views {
        position: relative;
        border: 10px solid var(--brand);
        border-block-start: none;
        height: calc(100% - (4rem + 48px));
    }

    &__views-inner {
        width: 100%;
        overflow: hidden;
    }

    &__view-wrap {
        height: 100vh;
    }
    //#endregion views
}

@media screen and (max-width: 1200px) {
    .main {
        &__form {
            width: 100%;
        }

        &__form-fields {
            width: 100%;
            gap: 1rem;
        }

        &__tab-wrap {
            justify-content: center;
            margin-block-start: 0;

            &::before {
                inset-inline-start: 0;
                // margin-inline-start: 0;
            }
        }

        &__views-inner {
            position: absolute;
            inset: 0;
            // margin-block-start: auto;
            // height: calc(100% - 48px);
        }
    }
}

@media screen and (max-width: 550px) {
    .main {
        &__form-fields {
            width: 100%;
            flex-direction: column;
            gap: 1rem;
        }
    }
}

.main__views-inner.hidden {
    pointer-events: none; /* Prevent interactions */
    filter: blur(12px);
}

.loading-icon {
    position: absolute;
    inset-block-start: 50%;
    inset-inline-start: calc(50% + (var(--secondary-controls-width) / 2 + 48px));
    transform: translate(-50%, -50%);
    z-index: 1000; /* Ensure it overlays the main__views-inner */

    & svg {
        stroke: var(--brand);
        animation: spin;
        animation-duration: 1.1s;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
        animation-iteration-count: infinite;
    }
}

body:has(.mapControls--container--hide) .loading-icon {
    inset-inline-start: 50%;
}

@keyframes spin {
    to {
        rotate: 360deg;
    }
    from {
        rotate: 0deg;
    }
}
